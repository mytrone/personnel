<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.gson.linyun.model.mapper.clockingin.IClockinginBusinessMapper">
    <resultMap id="businMap" type="cn.gson.linyun.model.pojos.clockingin.ClockinginBusiness">
        <id column="business_id" property="businessId" />
        <result column="business_name" property="businessName" />
    </resultMap>
    <!--查询未申请的出差报销单和为通过的 selectAllByEmpId-->
    <select id="selectAllByEmpId" resultMap="businMap">
        select business_id,business_name from
         clockingin_business where business_id not in(
 (select cb.business_id from clockingin_business cb INNER JOIN clockingin_reimburse
  cr on cb.business_id=cr.reimburse_serial where cb.emp_id=#{empId} and cr.reimburse_state=2 and cr.reimburse_state=1));
    </select>
</mapper>